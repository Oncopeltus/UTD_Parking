var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a,s=gap,f=t[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof rep&&(f=rep.call(t,e,f)),typeof f){case"string":return quote(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(f)){for(r=f.length,n=0;n<r;n+=1)a[n]=str(n,f)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(o=str(i=rep[n],f))&&a.push(quote(i)+(gap?": ":":")+o);else for(i in f)Object.prototype.hasOwnProperty.call(f,i)&&(o=str(i,f))&&a.push(quote(i)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(i=walk(o,n))?o[n]=i:delete o[n]);return reviver.call(e,t,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e){var t,n,i,o,r,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,u=0,c=[];if(!e)return e;e+="";do{t=(a=s.indexOf(e.charAt(f++))<<18|s.indexOf(e.charAt(f++))<<12|(o=s.indexOf(e.charAt(f++)))<<6|(r=s.indexOf(e.charAt(f++))))>>16&255,n=a>>8&255,i=255&a,c[u++]=64==o?String.fromCharCode(t):64==r?String.fromCharCode(t,n):String.fromCharCode(t,n,i)}while(f<e.length);return function(e){var t=[],n=0,i=0,o=0,r=0,a=0;for(e+="";n<e.length;)(o=e.charCodeAt(n))<128?(t[i++]=String.fromCharCode(o),n++):o>191&&o<224?(r=e.charCodeAt(n+1),t[i++]=String.fromCharCode((31&o)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t[i++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&a),n+=3);return t.join("")}(c.join(""))}window.parse_signed_request=function(e,n){(e=e.split("."))[0];var i=e[1];return i=(i=t(i)).substring(0,i.length-1),data=JSON.parse(i),"HMAC-SHA256"!=data.algorithm.toUpperCase()?"Unknown algorithm. Expected HMAC-SHA256":data}}(),function(e){var t,i,o,r,a,s,f;window.Webtrends&&(c.prototype=(i={app_data:"fb_ad",admin:"fb_pa",id:"fb_pid",liked:"fb_fan",country:"fb_uc",localse:"fb_ul",min:"fb_uam"},o={},r={"auth.login":1,"auth.logout":1,"edge.create":1,"edge.remove":1,"message.send":1,"comments.add":1,"comment.remove":1,"comment.create":1},a={},s=null,f=null,app_data={},{init:function(){var e=this;this.tags=o,this.user_status=null,this.FBReadySemphore++,window.fbAsyncInit&&!window.fbAsyncInit.hasRun?(t=window.fbAsyncInit,window.fbAsyncInit=function(){u(e)}):!window.fbAsyncInit&&window.FB?window.setTimeout(function(){u(e)},1):window.fbAsyncInit&&window.fbAsyncInit.hasRun?window.setTimeout(function(){u(e)},1):window.fbAsyncInit||(window.setTimeout(function(){u(e)},300),window.fbAsyncInit=function(){u(e)})},onLogon:function(e){if(e&&"userID"in e){if(s=e.userID,f=e.accessToken,e.signedRequest)try{sr=parse_signed_request(e.signedRequest),this.addSignedRequest(sr)}catch(e){this.dcs&&this.dcs.errors&&this.dcs.errors.push(e)}}else s=e.uid,f=e.access_token;this.FBReadySemphore++,this.getProfile()},run_setup:function(e){if(e){var t=this,n=e.session?e.session:e.authResponse;this.user_status=e.status,o["WT.fb_tv"]="10.2.23";var i=Webtrends.getQryParams(location.search);"undefined"!=n&&void 0!=n?(this.onLogon(n),o["WT.fb_ses"]="1"):o["WT.fb_ses"]="0","_apiKey"in FB&&(o["WT.fb_appid"]=FB._apiKey),"_inCanvas"in FB&&!0===FB._inCanvas?(o["WT.fb_ctx"]="1",i&&i.ref?i.type?o["WT.fb_ref"]=i.ref+"_"+i.type:o["WT.fb_ref"]=i.ref:i&&i.type&&(o["WT.fb_ref"]=i.type)):o["WT.fb_ctx"]="0";for(var r=new Array("auth.login","auth.logout","edge.create","edge.remove","message.send","comments.add","comment.remove","comment.create"),a=0;a<r.length;a++)!function(e){FB.Event.subscribe(r[e],function(n){t.subscriptionCallback(r[e],n)})}(a);i&&i.app_data&&this.addAppData(i.app_data),i&&i.mc_id&&(o["WT.mc_id"]=i.mc_id),i.qryparams&&i.mc_ref&&(o["WT.mc_ref"]=i.mc_ref),window.fb_signed_request?(this.addSignedRequest(window.fb_signed_request),o["WT.fb_sr"]="1"):(o["WT.fb_sr"]="0",FB._locale&&(o["WT.fb_ul"]=FB._locale)),""!=window.document.referrer&&"-"!=window.document.referrer&&"Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion)}},fbAsyncInit:function(){var e=this;if(window.FB){var t=!1,n=window.setTimeout(function(){t||(t=!0,e.run_setup({status:"notconnected"}),e.FBReadySemphore--,e.checkReady())},1e3);FB.getLoginStatus(function(i){t||(t=!0,window.clearTimeout(n),e.run_setup(i),e.FBReadySemphore--,e.checkReady())}),o["WT.fb_js"]="1"}else setTimeout(function(){window.FB?(FB.getLoginStatus(function(t){e.run_setup(t),e.FBReadySemphore--}),o["WT.fb_js"]="1"):(o["WT.fb_js"]="0",e.FBReadySemphore--),e.checkReady()},1e3)},checkReady:function(){0==this.FBReadySemphore&&this.setReady()},setReady:function(){var e=this;Webtrends.registerPlugin("facebook",function(t,i){e.config=i,e.dcs=t,Webtrends.addTransform(function(e){try{var t={fb_appid:"fb_aid",fb_g:"fb_ug",fb_fc:"fb_ufc",fb_cl:"fb_ucl",fb_isauth:"fb_ua",fb_fan:"fb_pl"};for(key in t)key in e.WT&&(e.WT[t[key]]=e.WT[key])}catch(e){}},"all"),Webtrends.addTransform(function(e){!function(e,t){var i={WT:t.WT,DCS:t.DCS,DCSext:t.DCSExt,fake:{}};for(n in e)n.split(".").length&&(tag=n.split(".")[0],i[tag][n.replace(tag+".","")]=e[n])}(window.Webtrends.FBPlugin.tags,e)},"collect")})},addAppData:function(e){if(e&&!this.addAppData.hasRun){for(var t=(e=e.replace(" ",";").replace("+",";")).split(":"),n=0;n<t.length;n++)-1!=t[n].indexOf(";")?app_data[t[n].split(";")[0]]=t[n].split(";")[1]:-1!=t[n].indexOf("+")&&(app_data[t[n].split("+")[0]]=t[n].split("+")[1]);if(t.length>1)for(var i in app_data)-1==i.indexOf("WT.")&&-1==i.indexOf("DCS.")||(o[i]=app_data[i]);this.addAppData.hasRun=!0}},addSignedRequest:function(e){e.app_data&&this.addAppData(e.app_data),this.loopValues(e)},loopValues:function(e){for(key in e)value=e[key],"object"==typeof value?this.loopValues(value):-1!==key.indexOf("WT.")?o[name]=value:i[key]&&(o["WT."+i[key]]=value)},profileUrl:function(){return f?"https://graph.facebook.com/"+s+"?access_token="+f+"&callback=window.Webtrends.FBPlugin.getProfileCB":"https://graph.facebook.com/"+s+"?callback=window.Webtrends.FBPlugin.profileCB"},friendsUrl:function(){return!!f&&"https://graph.facebook.com/"+s+"/friends?access_token="+f+"&callback=window.Webtrends.FBPlugin.friendsCB"},getProfile:function(){var e=this;e.profileUrl||(e=window.Webtrends.FBPlugin),Webtrends.loadJS(e.profileUrl(),!1)},getProfileCB:function(e){var t=this;t.parseCurrentLocation||(t=window.Webtrends.FBPlugin),a.userflag&&(o["WT.fb_uid"]=e.id),o["WT.fb_ul"]=e.locale,e.gender&&(o["WT.fb_ug"]=e.gender.match(/^m/i)?"male":"female"),o["WT.fb_ucl"]=t.parseCurrentLocation(e.location),o["WT.fb_uau"]=""==f?null:"1",f&&(t.FBReadySemphore++,Webtrends.loadJS(t.friendsUrl(),!1)),t.FBReadySemphore--,t.checkReady()},friendsCB:function(e){e.data&&e.data.length&&e.data.length>-1&&(o["WT.fb_fc"]=e.data.length);var t=this;t.dcs||(t=window.Webtrends.FBPlugin),t.FBReadySemphore--,t.checkReady()},parseCurrentLocation:function(e){return null==e?null:e.name},subscriptionCallback:function(e,t){var n=this;if(n.dcs||(n=window.Webtrends.FBPlugin),this.eventType=e,r[e]){o={},{"comments.add":1,"comment.create":1,"comments.create":1}[e]&&(e="comments.add"),"auth.login"===e&&t&&t.session&&this.onLogon(t.session),"comments.add"===e&&t.widget&&t.widget._attr&&(o["WT.fb_xid"]=t.widget._attr.xid);var i={"auth.login":"Login","auth.logout":"Logout","edge.create":"Like","edge.remove":"Unlike","message.send":"Share","comments.add":"CommentsAdd","comment.remove":"CommentRemove","comment.create":"CommentAdd"};o["WT.conv"]="Facebook:"+i[e],o["WT.convval"]="fb_"+e,o["WT.soc_action"]="Facebook:"+i[e],o["WT.dl"]="111",o["DCS.dcsuri"]="/multitrackevents/fb_"+e,n.dcs.dcsMultiTrack({args:o})}}}),Webtrends.FB={ui:function(e,t){"method"in e&&"feed"===e.method&&window.FB?window.FB.ui(e,function(e){e&&e.post_id?Webtrends.multiTrack({argsa:["DCS.dcsuri","/multitrackevents/fb.share_finished","WT.conv","1","WT.convval","fb_share","WT.fb_postid",e.post_id],callback:function(){t&&t(e)}}):t&&t(e)}):window.FB?window.FB.ui(e,t):t&&t({})}},window.Webtrends.FBPlugin=new c);function u(e){t&&!0!==t.hasRun&&(t(),t.hasRun=!0),e.fbAsyncInit()}function c(){this.dcs={},this.config={},this.FBReadySemphore=0,this.init()}}(window.Webtrends);